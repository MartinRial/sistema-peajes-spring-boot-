<!-- CU: Tablero de control del propietario -->
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tablero de control del propietario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet" />
    <link rel="stylesheet" href="../../style.css" />
    <link rel="stylesheet" href="./css/panel.css" />
    <!-- Vista Web Script -->
    <script src="/vistaWeb.js"></script>
    <script src="/sse.js"></script>
  </head>
  <body>
    <script src="/utilesVista.js"></script>
    <div class="container-fluid p-4">
      <!-- Header -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h4 mb-0 fw-bold text-dark">
          <i class="bi bi-grid-fill text-primary me-2"></i>
          Tablero de control del propietario
        </h1>
        <button class="btn btn-outline-primary btn-sm" onclick="logout()"><i class="bi bi-box-arrow-right me-1"></i>Salir</button>
      </div>

      <!-- Owner Summary -->
      <div class="card mb-4 shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-3 fw-semibold">Resumen del propietario</h5>
          <div class="row g-3">
            <div class="col-md-4">
              <small class="text-muted d-block mb-1">NOMBRE COMPLETO</small>
              <strong id="ownerName">Juan Pérez</strong>
            </div>
            <div class="col-md-4">
              <small class="text-muted d-block mb-1">ESTADO</small>
              <span class="badge bg-success" id="ownerStatus">Activo</span>
            </div>
            <div class="col-md-4">
              <small class="text-muted d-block mb-1">SALDO ACTUAL</small>
              <strong class="text-primary fs-5" id="ownerBalance">$ 2.540,00</strong>
            </div>
          </div>
        </div>
      </div>

      <!-- Bonifications & Vehicles Row -->
      <div class="row mb-4">
        <!-- Bonifications -->
        <div class="col-lg-6 mb-4 mb-lg-0">
          <div class="card h-100 shadow-sm">
            <div class="card-body">
              <h5 class="card-title mb-3 fw-semibold">Bonificaciones asignadas</h5>
              <div class="table-responsive">
                <table class="table table-hover table-sm align-middle">
                  <thead class="table-light">
                    <tr>
                      <th>Bonificación</th>
                      <th>Puesto</th>
                      <th>Fecha asignada</th>
                    </tr>
                  </thead>
                  <tbody id="bonificationsTable">
                    <tr>
                      <td>Frecuente</td>
                      <td>Peaje Norte</td>
                      <td>2025-01-10</td>
                    </tr>
                    <tr>
                      <td>Trabajador</td>
                      <td>Peaje Centro</td>
                      <td>2025-03-02</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Vehicles -->
        <div class="col-lg-6">
          <div class="card h-100 shadow-sm">
            <div class="card-body">
              <h5 class="card-title mb-3 fw-semibold">Vehículos registrados</h5>
              <div class="table-responsive">
                <table class="table table-hover table-sm align-middle">
                  <thead class="table-light">
                    <tr>
                      <th>Matrícula</th>
                      <th>Modelo</th>
                      <th>Color</th>
                      <th>Tránsitos</th>
                      <th class="text-end">Monto total</th>
                    </tr>
                  </thead>
                  <tbody id="vehiclesTable">
                    <tr>
                      <td><strong>SAB1234</strong></td>
                      <td>Sedán</td>
                      <td>Azul</td>
                      <td><span class="badge bg-secondary">12</span></td>
                      <td class="text-end">$ 1.240,00</td>
                    </tr>
                    <tr>
                      <td><strong>SCD5678</strong></td>
                      <td>SUV</td>
                      <td>Gris</td>
                      <td><span class="badge bg-secondary">8</span></td>
                      <td class="text-end">$ 980,00</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Transits -->
      <div class="card mb-4 shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-3 fw-semibold">Tránsitos realizados</h5>
          <div class="table-responsive">
            <table class="table table-hover table-sm align-middle">
              <thead class="table-light">
                <tr>
                  <th class="col-puesto">Puesto</th>
                  <th class="col-matricula">Matrícula</th>
                  <th class="col-categoria">Categoría</th>
                  <th class="text-end col-monto-tarifa">Monto tarifa</th>
                  <th class="col-bonificacion">Bonificación</th>
                  <th class="text-end col-monto-bonif">Monto bonif.</th>
                  <th class="text-end col-monto-pagado">Monto pagado</th>
                  <th class="col-fecha">Fecha</th>
                  <th class="col-hora">Hora</th>
                </tr>
              </thead>
              <tbody id="transitsTable">
                <tr>
                  <td class="col-puesto">Peaje Sur</td>
                  <td class="col-matricula"><strong>SAB1234</strong></td>
                  <td class="col-categoria">Motocicleta</td>
                  <td class="text-end col-monto-tarifa">$ 120,00</td>
                  <td class="col-bonificacion">Frecuente</td>
                  <td class="text-end text-success col-monto-bonif">-$ 24,00</td>
                  <td class="text-end fw-bold col-monto-pagado">$ 96,00</td>
                  <td class="col-fecha">2025-09-19</td>
                  <td class="col-hora">18:45</td>
                </tr>
                <tr>
                  <td class="col-puesto">Peaje Norte</td>
                  <td class="col-matricula"><strong>SCD5678</strong></td>
                  <td class="col-categoria">Camión</td>
                  <td class="text-end col-monto-tarifa">$ 180,00</td>
                  <td class="col-bonificacion">Trabajador</td>
                  <td class="text-end text-success col-monto-bonif">-$ 36,00</td>
                  <td class="text-end fw-bold col-monto-pagado">$ 144,00</td>
                  <td class="col-fecha">2025-09-18</td>
                  <td class="col-hora">08:22</td>
                </tr>
                <tr>
                  <td class="col-puesto">Peaje Centro</td>
                  <td class="col-matricula"><strong>SAB1234</strong></td>
                  <td class="col-categoria">Motocicleta</td>
                  <td class="text-end col-monto-tarifa">$ 120,00</td>
                  <td class="col-bonificacion">Frecuente</td>
                  <td class="text-end text-success col-monto-bonif">-$ 24,00</td>
                  <td class="text-end fw-bold col-monto-pagado">$ 96,00</td>
                  <td class="col-fecha">2025-09-17</td>
                  <td class="col-hora">19:05</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- System Notifications -->
      <div class="card shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="card-title mb-0 fw-semibold">Notificaciones del sistema</h5>
            <button onclick="borrarNotificaciones" class="btn btn-danger btn-sm" id="clearNotifications"><i class="bi bi-trash me-1"></i>Borrar notificaciones</button>
          </div>
          <div id="notificationsList">
            <div class="alert alert-info alert-dismissible fade show mb-2" role="alert">
              <i class="bi bi-info-circle me-2"></i>
              <strong>Información:</strong> Su saldo actual es de $2.540,00
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            <div class="alert alert-success alert-dismissible fade show mb-2" role="alert">
              <i class="bi bi-check-circle me-2"></i>
              <strong>Éxito:</strong> Se ha registrado un nuevo tránsito en Peaje Sur
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./js/panel.js"></script>
  </body>
</html>
